@model IEnumerable<AzureBlog.Models.ArticleModel>

@{
    ViewBag.Title = "Article";
}
<div class="wholePost">
    @foreach (var article in Model)
    {
        <img class="coverPic" src="@article.ArticlePic" />
        <div class="greyBox">
            <div class="alignCenter">
                <p class="tblContents">Table of contents</p>
            </div>
            <hr />
            @Html.Partial("_tableOfContents", article);
        </div>
        foreach (var segment in article.ArticleSegments.OrderByDescending(x => x.Votes))
        {
            <div class="greyBox">
                <form class="upvote" action="~/Default/Article/Upvote">
                    <input name="segId" hidden value="@segment.ArticleSegmentId" />
                    <input name="artSlug" hidden value="@article.ArticleSlug" />
                    @*<button class="likeButton btn btn-success btn-sm">
                           <span>Like!</span><span class="voteNum">@segment.Votes</span>
                        </button>*@
                    <button id="heart">
                        @segment.Votes
                    </button>
                </form>

                <p id="@segment.ArticleSegmentTitle" class="segTitle">SegTitle:  @segment.ArticleSegmentTitle</p>
                <p class="bodyText">
                    Curabitur viverra rhoncus tellus. Duis non condimentum lacus. Aliquam id feugiat mauris, sit amet varius metus. Sed fringilla mattis nibh, nec viverra tellus consectetur ut. Integer et libero viverra nibh elementum
                </p>
                @Html.Partial("_firstProduct", segment)
                @Html.Partial("_productList", segment)
               
            </div>

            if (User.IsInRole("Admin"))
            {
                <h1>Add product</h1>
                <form action="~/Default/Article/AddProduct">
                    <input name="segId" hidden value="@segment.ArticleSegmentId" />
                    <input name="artSlug" hidden value="@article.ArticleSlug" />
                    <hr />
                    <input name="ASIN" placeholder="ASIN" />
                    <hr />
                    <button>Add Product</button>
                </form>
            }
        }

        @Html.Partial("_addArticle", article);
        @Html.Partial("_addSegment", article);
        @*@Html.Partial("_userAddSegment");*@
    }

</div>